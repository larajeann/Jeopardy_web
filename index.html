<!DOCTYPE html>
<html>
<head>
  <title>Jeopardy Game</title>
  <link rel="stylesheet" href="assets/style.css">
  <style>
    .disabled { opacity: 0.5; pointer-events: none; }
  </style>
</head>
<body>
  <h2>Jeopardy Game</h2>

  <div class="main-content">
    <table>
      <tr>
        <th>Science</th>
        <th>History</th>
        <th>Math</th>
        <th>Sports</th>
        <th>Music</th>
      </tr>
      <!-- Each row is a point level -->
      <!-- Replace with JS later if needed -->
      <script>
        const categories = ["Science", "History", "Math", "Sports", "Music"];
        const usedQuestions = JSON.parse(localStorage.getItem('usedQuestions') || '[]');

        function createBoard() {
          const table = document.querySelector("table");
          for (let i = 1; i <= 5; i++) {
            const row = document.createElement("tr");
            categories.forEach(cat => {
              const points = i * 100;
              const key = `${cat}-${points}`;
              const cell = document.createElement("td");
              if (usedQuestions.includes(key)) {
                cell.innerHTML = '<span class="disabled">X</span>';
              } else {
                const btn = document.createElement("button");
                btn.className = "question-btn";
                btn.textContent = points;
                btn.dataset.key = key;
                btn.onclick = () => showQuestion(cat, points);
                cell.appendChild(btn);
              }
              row.appendChild(cell);
            });
            table.appendChild(row);
          }
        }

        function showQuestion(category, points) {
          const key = `${category}-${points}`;
          usedQuestions.push(key);
          localStorage.setItem('usedQuestions', JSON.stringify(usedQuestions));
          alert(`Question for ${category} - ${points} points`);
          location.reload(); // Refresh to update disabled state
        }

        window.onload = createBoard;
      </script>
    </table>

    <div id="question-modal" style="display: none;">
      <div class="modal-content" id="modal-content"></div>
    </div>
  </div>

  <div class="scores">
    <div class="team-score">
      <div>Team A</div>
      <div id="score-team-a">Score: 0</div>
      <div class="score-controls">
        <a href="#" onclick="updateScore('team-a', 100); return false;">+100</a>
        <a href="#" onclick="updateScore('team-a', -100); return false;">-100</a>
      </div>
    </div>
    <div class="team-score">
      <div>Team B</div>
      <div id="score-team-b">Score: 0</div>
      <div class="score-controls">
        <a href="#" onclick="updateScore('team-b', 100); return false;">+100</a>
        <a href="#" onclick="updateScore('team-b', -100); return false;">-100</a>
      </div>
    </div>
  </div>

  <script>
    const scores = JSON.parse(localStorage.getItem("scores") || '{"team-a":0,"team-b":0}');

    function updateScore(team, points) {
      scores[team] += points;
      document.getElementById(`score-${team}`).textContent = `Score: ${scores[team]}`;
      localStorage.setItem("scores", JSON.stringify(scores));
    }

    window.addEventListener("load", () => {
      for (const [team, score] of Object.entries(scores)) {
        const el = document.getElementById(`score-${team}`);
        if (el) el.textContent = `Score: ${score}`;
      }
    });
  </script>

  <button onclick="finishGame()" class="finish-btn">Finish Game üéâ</button>
  <button onclick="resetGame()" class="reset-btn">Reset Game</button>

  <script>
    function finishGame() {
      const max = Math.max(...Object.values(scores));
      const winners = Object.entries(scores)
        .filter(([_, score]) => score === max)
        .map(([team]) => team.toUpperCase());

      alert(winners.length > 1
        ? `üèÜ It's a tie between ${winners.join(", ")}!`
        : `üèÜ Congrats ${winners[0]}! You won with ${max} points!`);
    }

    function resetGame() {
      localStorage.clear();
      location.reload();
    }
  </script>
</body>
</html>
